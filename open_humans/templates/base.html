{% load static from staticfiles %}
{% load utilities %}
<!DOCTYPE html>
<html>
  <head profile="http://www.w3.org/2005/10/profile">
    <title>{% block head_title %}Open Humans{% endblock %}</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    {# These scripts are better included here rather than via browserify #}
    <script src="{% static 'vendor/jquery.js' %}"></script>
    <script src="{% static 'vendor/jquery.cookie.js' %}"></script>

    <script src="{% static 'vendor/bootstrap.js' %}"></script>

    {# Application JavaScript #}
    <script src="{% static 'js/bundle-main.js' %}"></script>

    {# Per-page JavaScript #}
    {% page_bundle %}

    {# But some URLs are dynamic, e.g. '/members/username'. #}
    {% block extra_js %}{% endblock %}

    <link rel="stylesheet" type="text/css"
      href="{% static 'vendor/bootstrap.css' %}">

    <link href='//fonts.googleapis.com/css?family=Open+Sans:400,700'
      rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Quando'
      rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Merriweather:400italic,400,700,700italic'
      rel='stylesheet' type='text/css'>

    <link rel="icon" type="image/png"
      href="{% static 'images/open_humans_favicon.png' %}">

    <link rel="stylesheet" type="text/css" href="{% static 'css/main.css' %}">
  </head>

  <body id="{% page_body_id %}">
    <div id="blurred-people-background"
      style="{% block background_image %}{% endblock %}"></div>

    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse"
              data-target="#main-navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>

          <a class="navbar-brand" href="/">Open Humans</a>
        </div>

        <div class="collapse navbar-collapse" id="main-navbar-collapse">
          <ul class="nav navbar-nav navbar-right">
            <li class="{% active 'about' %}"><a href="/about/">About Us</a></li>

            <li><a href="http://blog.openhumans.org/">Our Blog</a></li>

            <li class="{% active 'member(s|/(?!me/))' %}">
              <a href="{% url 'member-list' %}">Member Profiles</a></li>

            <li class="{% active 'activities' %}">
              <a href="{% url 'activities' %}">Activities</a></li>

            <li class="divider"></li>

            {% if user.is_authenticated %}
            <li class="{% active 'member\/me\/' %}"><a
              href="{% url 'my-member-dashboard' %}">My Account</a></li>

            {# TODO: Move inline style to stylesheet #}
            <li style="margin-left: 8px;">
              <a class="logout-link" href="{% url 'account_logout' %}">
                Log out</a>
            </li>
            {% else %}

            <li class="{% active 'signup' %}">
              <a href="{% url 'account_signup' %}" class="signup-link">Create
                account</a>
            </li>

            <li class="{% active 'login' %}">
              <a href="{% url 'account_login' %}" class="login-link">Log in</a>
            </li>
            {% endif %}
          </ul>
        </div>
      </div>
    </nav>

    <div class="body-main">
      {% block body_main %}
      <div class="container">
        {% block messages_block %}
          {% if messages %}
          <div class="row">
            {% for message in messages %}
            <div{% if message.tags %} class="message {{ message.tags }}"{% endif %}>
              {{ message }}</div>
            {% endfor %}
          </ul>
          {% endif %}
        {% endblock messages_block %}

        {% block main %}{% endblock %}
      </div>
      {% endblock body_main %}
    </div>

    <div class="footer">
      <div class="container">
        <div class="text-center">
          <a href="{% url 'about' %}">About&nbsp;Us</a> |
          <a href="http://blog.openhumans.org/">Our&nbsp;Blog</a> |
          <a href="{% url 'contact_us' %}">Contact&nbsp;Us</a> |
          <a href="{% url 'community_guidelines' %}">Community&nbsp;Guidelines</a> |
          <a href="{% url 'terms-of-use' %}">Terms&nbsp;of&nbsp;Use</a> |
          <a href="{% url 'data-use-policy' %}">Data&nbsp;Use&nbsp;Policy</a>
        </div>
      </div>
    </div>

    {% include 'account/signup-modal.html' %}
    {% include 'account/login-modal.html' %}

    {% block extra_modals %}{% endblock %}

    {% include 'partials/usersnap.html' %}
  </body>
</html>
