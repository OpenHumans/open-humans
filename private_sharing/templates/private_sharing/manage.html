{% extends 'base.html' %}

{% block head_title %}Manage projects for private data sharing{% endblock %}

{% block main %}
<h3>Manage projects requesting private data authorization</h3>

<div class="well">
  <b>Welcome to our new private data sharing feature!</b> Please consider
  yourself an "alpha" user. We're developing this feature. We highly value
  your feedback and would love to hear from you. You can email us at
  <a href="mailto:support@openhumans.org">support@openhumans.org</a>.
</div>

{% if not onsite and not oauth2 %}
<h4>Which type of project do you want?</h4>
<p>
  Unless you're running a website or app with user accounts, you probably
  want "On site authorization".
  <a href="{% url 'private-sharing:overview' %}">Read the docs for more
  information.</a>
</p>
<hr>
{% endif %}

<h4>On-site projects</h4>

<p>
  Informed consent occurs on Open Humans. This is typically used if you are
  not running your own website or app with user accounts.
</p>

{% if onsite %}
<table class="table table-hover">
  <thead>
    <tr>
      <th>Project name</th>
      <th>Actions</th>
    </tr>
  </thead>

  {% for project in onsite %}
  <tr>
    <td>{{ project.name }}</td>
    <td>
      <a href="{% url 'private-sharing:detail-on-site' pk=project.pk %}">view</a>
      <a href="{% url 'private-sharing:update-on-site' pk=project.pk %}">edit</a>
    </td>
  </tr>
  {% endfor %}
</table>
{% else %}
  <ul><li><p>You have no on-site projects.</p></li></ul>
{% endif %}

<p>
  <a href="{% url 'private-sharing:create-on-site' %}"
      class="btn btn-default">Create a new on-site data request project</a>
</p>

<hr>

<h4>OAuth2 projects</h4>

<p>
  If you're running your own website or app, you probably want to use an
  OAuth2 process. We expect informed consent to have occurred on your site or
  app before your user comes to Open Humans.
</p>

<h5 style="margin-top:20px;">Your OAuth2 projects</h5>

{% if oauth2 %}
<table class="table table-hover">
  <thead>
    <tr>
      <th>Project name</th>
      <th>Actions</th>
    </tr>
  </thead>

  {% for project in oauth2 %}
  <tr>
    <td>{{ project.name }}</td>
    <td>
      <a href="{% url 'private-sharing:detail-oauth2' pk=project.pk %}">view</a>
      <a href="{% url 'private-sharing:update-oauth2' pk=project.pk %}">edit</a>
    </td>
  </tr>
  {% endfor %}
</table>
{% else %}
  <ul><li><p>You have no OAuth2 projects.</p></li></ul>
{% endif %}

<p>
  <a href="{% url 'private-sharing:create-oauth2' %}"
      class="btn btn-default">
    Create a new OAuth2 data request project</a>
</p>
{% endblock %}
